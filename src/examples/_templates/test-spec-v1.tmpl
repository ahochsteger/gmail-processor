// NOTE: Do not edit this auto-generated file!
// Template: ${__E2E_TEMPLATE_FILE_PATH__}
// Source: ${__E2E_TEST_FILE_PATH__}

import * as GmailProcessorLib from "../../lib"
import { validateV1Config } from "../${__E2E_TEST_FILE_DIR_UP__}/lib/config/v1/V1Validate"
import { validateConfig } from "./../${__E2E_TEST_FILE_DIR_UP__}/lib/config/Validate"
import { info, migrationConfig } from "./${__E2E_TEST_FILE_BASENAME__}"

describe(`Example ${info.name}`, () => {
  it(`should successfully validate migration example config ${info.name}`, () => {
    validateV1Config(migrationConfig)
    expect(validateV1Config.errors).toBeNull()
  })
  it(`should successfully run migration example ${info.name}`, () => {
    const convertedConfig = GmailProcessorLib.convertV1Config(migrationConfig)
    expect(convertedConfig.threads?.length).toEqual(migrationConfig.rules.length)
  })
  it(`should successfully validate converted migration example ${info.name}`, () => {
    const convertedConfig = GmailProcessorLib.convertV1Config(migrationConfig)
    validateConfig(convertedConfig)
  })
})


import * as GmailProcessorLib from "../../lib"
import { validateV1Config } from "../../lib/config/v1/V1Validate"
import { validateConfig } from "./../../lib/config/Validate"
import { info, migrationConfig } from "./migrationMin"

describe(`Example ${info.name}`, () => {
  it(`should successfully validate migration example config ${info.name}`, () => {
    validateV1Config(migrationConfig)
    expect(validateV1Config.errors).toBeNull()
  })
  it(`should successfully run migration example ${info.name}`, () => {
    const convertedConfig = GmailProcessorLib.convertV1Config(migrationConfig)
    expect(convertedConfig.threads?.length).toEqual(
      migrationConfig.rules.length,
    )
  })
  it(`should successfully validate converted migration example ${info.name}`, () => {
    const convertedConfig = GmailProcessorLib.convertV1Config(migrationConfig)
    validateConfig(convertedConfig)
  })
})
