// NOTE: Do not edit this auto-generated file - edit the source file in src/examples instead!

import { validateConfig } from "./../${__E2E_TEST_FILE_DIR_UP__}/lib/config/Validate"

import * as GmailProcessorLib from "../${__E2E_TEST_FILE_DIR_UP__}/lib"
import { MockFactory, Mocks } from "../../test/mocks/MockFactory"
import { info, runConfig } from "./${__E2E_TEST_FILE_BASENAME__}"

let processingResult: GmailProcessorLib.ProcessingResult
let mocks: Mocks

beforeAll(() => {
  mocks = MockFactory.newMocks()
  processingResult = GmailProcessorLib.run(
    runConfig,
    GmailProcessorLib.RunMode.DANGEROUS,
    mocks.envContext,
  )
})

describe(`Example ${info.name}`, () => {
  it(`should successfully validate example ${info.name}`, () => {
    validateConfig(runConfig)
  })
  it(`should successfully run migration example ${info.name}`, () => {
    expect(processingResult.status).toEqual(
      GmailProcessorLib.ProcessingStatus.OK,
    )
  })
})
