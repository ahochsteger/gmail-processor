"use strict";(self.webpackChunkgmail_processor_docs=self.webpackChunkgmail_processor_docs||[]).push([[2857],{59560:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>h,contentTitle:()=>c,default:()=>m,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"getting-started","title":"Getting Started","description":"There are different ways to get started with GmailProcessor in your Google Apps Script project:","source":"@site/docs/getting-started.mdx","sourceDirName":".","slug":"/getting-started","permalink":"/gmail-processor/docs/getting-started","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/getting-started.mdx","tags":[],"version":"current","sidebarPosition":20,"frontMatter":{"sidebar_position":20},"sidebar":"docsSidebar","previous":{"title":"About Gmail Processor","permalink":"/gmail-processor/docs/"},"next":{"title":"Examples","permalink":"/gmail-processor/docs/examples/"}}');var i=r(74848),a=r(28453),n=r(90514),o=r(73748);r(34153);const l={sidebar_position:20},c="Getting Started",h={},d=[{value:"Use a Library Reference (recommended)",id:"use-a-library-reference-recommended",level:2},{value:"Copy the Library Code (advanced)",id:"copy-the-library-code-advanced",level:2},{value:"Required API Permissions",id:"required-api-permissions",level:2}];function u(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components},{Details:r}=t;return r||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"getting-started",children:"Getting Started"})}),"\n",(0,i.jsx)(t.p,{children:"There are different ways to get started with GmailProcessor in your Google Apps Script project:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsxs)(t.a,{href:"#use-a-library-reference-recommended",children:[(0,i.jsx)(t.strong,{children:"Use"})," a library reference (recommended)"]}),": Use this, if you just want to use the library, get easy updates and don't want to fiddle with the library code at all."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsxs)(t.a,{href:"#copy-the-library-code-advanced",children:[(0,i.jsx)(t.strong,{children:"Copy"})," the library code (advanced)"]}),": Use this if you want full control over what's being executed or use your own modified library."]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"use-a-library-reference-recommended",children:"Use a Library Reference (recommended)"}),"\n",(0,i.jsx)(t.p,{children:"To use the Gmail Processor library directly within Google Apps Script, you can choose from three available release channels with the associated script IDs - depending on your needs:"}),"\n",(0,i.jsx)(t.p,{children:"Follow these steps:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["Open ",(0,i.jsx)(t.a,{href:"https://script.google.com/home?hl=en",children:"Google Apps Script"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:["Create an empty project and give it a name (e.g. ",(0,i.jsx)(t.code,{children:"MyGmailProcessor"}),") or select an existing one."]}),"\n",(0,i.jsx)(t.li,{children:"Add the library in the Libraries section using the \uff0b icon and insert this Script ID:"}),"\n"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-text",children:"1Qvk0v7ggfW-TJ84dlYPlDzJG8y-Dif-j9kdA1aWv4wzxE_IOkeV2juLB\n"})}),"\n",(0,i.jsxs)(t.ol,{start:"4",children:["\n",(0,i.jsxs)(t.li,{children:['Press "Look up" and select the desired release number as ',(0,i.jsx)(t.strong,{children:"version"}),' (recommended for stability) or "HEAD (Development Mode)" (recommended for automatically staying up-to-date with the potential risk of broken updates).',"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["See the ",(0,i.jsx)(t.a,{href:"https://github.com/ahochsteger/gmail-processor/releases",children:"Gmail Processor Release Notes"})," for their corresponding Google Apps Script library version."]}),"\n",(0,i.jsxs)(t.li,{children:["Or use this URL to verify the release version of a Google Apps Script Library: ",(0,i.jsx)(t.a,{href:"https://script.google.com/macros/library/d/1Qvk0v7ggfW-TJ84dlYPlDzJG8y-Dif-j9kdA1aWv4wzxE_IOkeV2juLB/%7BlibVersion%7D",children:"https://script.google.com/macros/library/d/1Qvk0v7ggfW-TJ84dlYPlDzJG8y-Dif-j9kdA1aWv4wzxE_IOkeV2juLB/{libVersion}"})," (replace ",(0,i.jsx)(t.code,{children:"{libVersion}"})," with the number from the drop-down in Google Apps Script)."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["Set the ",(0,i.jsx)(t.strong,{children:"identifier"})," to ",(0,i.jsx)(t.code,{children:"GmailProcessorLib"})," (any name will do, but we will use this identifier as a reference in all ",(0,i.jsx)(t.a,{href:"/gmail-processor/docs/examples/",children:"examples"})," and documentation)"]}),"\n",(0,i.jsxs)(t.li,{children:["Replace the contents of the initially created file ",(0,i.jsx)(t.code,{children:"Code.gs"})," with the following code, take the config from the ",(0,i.jsx)(t.a,{href:"/gmail-processor/docs/examples/basics/simple",children:"Simple Example"})," and save the changes:"]}),"\n"]}),"\n",(0,i.jsxs)(r,{children:[(0,i.jsx)("summary",{children:"Expand example"}),(0,i.jsx)(o.default,{language:"js",showLineNumbers:!0,children:n.A.replace(/^function simpleRun\b/,"function run")})]}),"\n",(0,i.jsxs)(t.ol,{start:"7",children:["\n",(0,i.jsxs)(t.li,{children:["Perform an initial execution of the function ",(0,i.jsx)(t.code,{children:"run"})," to grant all required permissions (see ",(0,i.jsx)(t.a,{href:"#required-api-permissions",children:"Required API Permissions"})," for more details):","\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Select your account you want to grant access for"}),"\n",(0,i.jsx)(t.li,{children:'When the message "Google did not verify the app" click on "Advanced" and "Go to ..." to proceed'}),"\n",(0,i.jsx)(t.li,{children:'Grant access to all listed apps by clicking "Allow"'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["Adjust the configuration (see section ",(0,i.jsx)(t.a,{href:"/gmail-processor/docs/reference/",children:"Configuration Reference"}),") to your needs. It's always recommended to test config changes using the run mode ",(0,i.jsx)(t.code,{children:"dry-run"})," (2nd parameter to the ",(0,i.jsx)(t.code,{children:"run()"})," function). That doesn't touch anything (GMail, GDrive, Google Sheets) but produces a log that shows what would have been done. This way any change in your configuration or an upgrade to a newer version of the library can be tested without any risk of data-loss."]}),"\n",(0,i.jsxs)(t.p,{children:["If you're satisfied with the results change the run mode from ",(0,i.jsx)(t.code,{children:"dry-run"})," to ",(0,i.jsx)(t.code,{children:"safe-mode"})," to actually do the processing and execute the ",(0,i.jsx)(t.code,{children:"run"})," function again.\nFor automatic triggering you can create a ",(0,i.jsx)(t.a,{href:"https://developers.google.com/apps-script/guides/triggers/installable#manage_triggers_manually",children:"time-based trigger"})," that runs at certain intervals (e.g. once per day or every hour)."]}),"\n",(0,i.jsx)(t.p,{children:"Should you run into any problems please create an issue and put the configuration as well as the log output there. Make sure to remove any sensitive information before doing so, since the issue contents will be publicly visible."}),"\n",(0,i.jsx)(t.h2,{id:"copy-the-library-code-advanced",children:"Copy the Library Code (advanced)"}),"\n",(0,i.jsx)(t.p,{children:"To use a copy of the library code in your project simply replace steps 3-5 from above with the following steps:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:'Create a new file using the + icon at "Files" and selecting "Script"'}),"\n",(0,i.jsxs)(t.li,{children:["Give it a name (e.g. ",(0,i.jsx)(t.code,{children:"GmailProcessorLib"})," resulting in the file ",(0,i.jsx)(t.code,{children:"GmailProcessorLib.gs"})," to be created)"]}),"\n",(0,i.jsxs)(t.li,{children:["Replace the contents of the file with the library code of the release asset ",(0,i.jsx)(t.a,{href:"https://github.com/ahochsteger/gmail-processor/releases/latest/download/GmailProcessorLib.js",children:(0,i.jsx)(t.code,{children:"GmailProcessorLib.js"})})," from the latest release or your own built version from ",(0,i.jsx)(t.code,{children:"build/gas/lib/GmailProcessorLib.js"}),"."]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Follow the remaining steps from step 6 onwards from above."}),"\n",(0,i.jsx)(t.h2,{id:"required-api-permissions",children:"Required API Permissions"}),"\n",(0,i.jsxs)(t.p,{children:["To enable full processing of the emails the following ",(0,i.jsx)(t.a,{href:"https://developers.google.com/identity/protocols/oauth2/scopes#script",children:"OAuth Scopes for Google APIs"})," are requested and need to be granted:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"https://mail.google.com/"}),": Access Gmail API to process emails"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"https://www.googleapis.com/auth/drive"}),": Access Google Drive API to store files"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"https://www.googleapis.com/auth/script.external_request"}),": Used for end-to-end tests to fetch example attachments via HTTP"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"https://www.googleapis.com/auth/script.send_mail"}),": Used for end-to-end tests to send example emails"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"https://www.googleapis.com/auth/spreadsheets"}),": Access Google Spreadsheets API to store logs of processed emails"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"https://www.googleapis.com/auth/userinfo.email"}),": Get the user's email address to be used in the configuration"]}),"\n"]})]})}function m(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},20301:(e,t,r)=>{r.d(t,{bk:()=>i,lI:()=>s,sE:()=>a});let s=function(e){return e.ACTIONS="actions",e.ADVANCED="advanced",e.BASICS="basics",e.FEATURES="features",e.MIGRATIONS="migrations",e.REGRESSIONS="regressions",e}({}),i=function(e){return e.CONFIG="config",e.DOCS="docs",e.DOCS_INDEX="docs-index",e.GAS_CODE="gas-code",e.GAS_TEST="gas-test",e.TEST_SPEC="test-spec",e}({}),a=function(e){return e.CUSTOM_ACTIONS="custom-actions",e.MIGRATION_V1="migration-v1",e}({})},34153:(e,t,r)=>{r.d(t,{Fw:()=>c,pq:()=>o});r(2744);var s=r(48443),i=r(16407),a=r(20301),n=r(87694);const o={name:"simple",title:"Store Attachment",description:"Use this to get started with Gmail Processor. It stores an attachment to Google Drive.",category:a.lI.BASICS},l={description:o.description,settings:{markProcessedMethod:i.Pn.MARK_MESSAGE_READ},global:{thread:{match:{query:`has:attachment -in:trash -in:drafts -in:spam after:{{date.now|formatDate('yyyy-MM-dd')}} is:unread subject:"${n.L.EMAIL_SUBJECT_PREFIX}${o.name}"`}}},threads:[{match:{query:"from:${user.email}"},messages:[{attachments:[{match:{name:"^invoice\\.pdf$"},actions:[{name:"attachment.store",args:{location:`${n.L.DRIVE_TESTS_BASE_PATH}/${o.name}/{{message.date|formatDate('yyyy-MM-dd')}}/{{message.subject}}-{{attachment.name}}`,conflictStrategy:s.c2.KEEP}}]}]}]}]},c={info:o,config:l}},2744:(e,t,r)=>{r.d(t,{Ah:()=>i,GS:()=>n,KI:()=>a,jV:()=>s});let s=function(e){return e.DRY_RUN="dry-run",e.SAFE_MODE="safe-mode",e.DANGEROUS="dangerous",e}({}),i=function(e){return e.BOOLEAN="boolean",e.DATE="date",e.NUMBER="number",e.STRING="string",e.VARIABLE="variable",e}({});function a(e,t,r,s,i){return{deprecationInfo:i,description:s,title:r,type:e,value:t}}let n=function(e){return e.ERROR="error",e.OK="ok",e}({});Error},48443:(e,t,r)=>{r.d(t,{c2:()=>Oe});r(2744);var s=r(64467),i=r(9580),a=r(10961),n=r(67251),o=r(21153),l=r(85910),c=r(24442),h=r(60964),d=r(40597),u=r(4052),m=r(13538),g=r(73206),A=r(70268),f=r(46406),E=r(93505),R=r(12361),p=r(44766),x=r(65043),y=r(99972),L=r(18821),_=r(66436),P=r(99293),N=r(27871),T=r(95305),D=r(59725),j=r(52512),C=r(94806),O=r(63217),G=r(98718),S=r(37797),b=r(29295),v=r(88742),w=r(6501),k=r(90250),I=r(90405),M=r(25322),H=r(60401),U=r(59723),X=r(79426),Y=r(8001),F=r(82014),B=r(2632),V=r(18109),z=r(9751),J=r(61777),W=r(29350),q=r(16363),K=r(78719),$=r(19681),Q=r(21691),Z=r(73843),ee=r(82602),te=r(56060),re=r(53819),se=r(16558),ie=r(96058),ae=r(83643);const ne={ms:1,s:1e3,m:6e4,h:36e5,d:864e5,w:6048e5,mo:26298e5,y:315576e5,ns:1e-6,us:.001,"\xb5s":.001},oe={ms:"ms",millisecond:"ms",milliseconds:"ms",s:"s",sec:"s",secs:"s",second:"s",seconds:"s",m:"m",min:"m",mins:"m",minute:"m",minutes:"m",h:"h",hr:"h",hrs:"h",hour:"h",hours:"h",d:"d",day:"d",days:"d",w:"w",wk:"w",wks:"w",week:"w",weeks:"w",mo:"mo",mth:"mo",month:"mo",months:"mo",y:"y",yr:"y",yrs:"y",year:"y",years:"y",ns:"ns",us:"us","\xb5s":"\xb5s"};const le="yyyy-MM-dd HH:mm:ss";l.D,c.z,h.F,d.g,u.f,m.V,g.p,A.j,f.x,E.o,R.o,p.$,x.Q,y.B,L.o,_.d,P.K,N.W,T.E,D.e,j.T,C.j,O.u,G.R,S.u,b.G,v.H,w.M,k.N,I._,M.D,H.W,U.i,X.N,Y.G,F.F,B.X,V.o,z.M,J.Q,W.b,q.w,K.c,$.w,Q.a,Z.a,ee.R,te.R,re.k,se.b,ie.D,ae.K;var ce,he;class de extends i.JG{constructor(e){super(e),this.interpreter=new i.ay(this,de._ATN,de.decisionsToDFA,new i.tD)}get grammarFileName(){return"ExprLexer.g4"}get literalNames(){return de.literalNames}get symbolicNames(){return de.symbolicNames}get ruleNames(){return de.ruleNames}get serializedATN(){return de._serializedATN}get channelNames(){return de.channelNames}get modeNames(){return de.modeNames}static get _ATN(){return de.__ATN||(de.__ATN=(new i.fr).deserialize(de._serializedATN)),de.__ATN}get vocabulary(){return de.vocabulary}}ce=de,(0,s.A)(de,"STRING",1),(0,s.A)(de,"TEXT",2),(0,s.A)(de,"XPSTART",3),(0,s.A)(de,"LEGACY_XPSTART",4),(0,s.A)(de,"WS",5),(0,s.A)(de,"EXPR_WS",6),(0,s.A)(de,"XPEND",7),(0,s.A)(de,"PIPE",8),(0,s.A)(de,"COMMA",9),(0,s.A)(de,"LPAREN",10),(0,s.A)(de,"RPAREN",11),(0,s.A)(de,"DOT",12),(0,s.A)(de,"ID",13),(0,s.A)(de,"BooleanLiteral",14),(0,s.A)(de,"IntegerLiteral",15),(0,s.A)(de,"LEGACY_COLON",16),(0,s.A)(de,"LEGACY_DOT",17),(0,s.A)(de,"LEGACY_ID",18),(0,s.A)(de,"LegacyIntegerLiteral",19),(0,s.A)(de,"LEGACY_EXPR_XPEND",20),(0,s.A)(de,"LegacyPlaceHolderModifierDate",21),(0,s.A)(de,"LegacyPlaceholderModifierFormat",22),(0,s.A)(de,"LegacyPlaceholderModifierJoin",23),(0,s.A)(de,"LegacyPlaceHolderModifierOffsetFormat",24),(0,s.A)(de,"LEGACY_ARGS_COLON",25),(0,s.A)(de,"LEGACY_PLACEHOLDER_XPEND",26),(0,s.A)(de,"LEGACY_ARGS_XPEND",27),(0,s.A)(de,"LegacyPlaceholderArgs",28),(0,s.A)(de,"EXPR_MODE",1),(0,s.A)(de,"LEGACY_EXPR_MODE",2),(0,s.A)(de,"LEGACY_PLACEHOLDER_MODE",3),(0,s.A)(de,"LEGACY_ARGS_MODE",4),(0,s.A)(de,"channelNames",["DEFAULT_TOKEN_CHANNEL","HIDDEN"]),(0,s.A)(de,"literalNames",[null,null,null,"'{{'","'${'",null,null,"'}}'","'|'","','","'('","')'",null,null,null,null,null,null,null,null,null,"'date'","'format'","'join'","'offset-format'"]),(0,s.A)(de,"symbolicNames",[null,"STRING","TEXT","XPSTART","LEGACY_XPSTART","WS","EXPR_WS","XPEND","PIPE","COMMA","LPAREN","RPAREN","DOT","ID","BooleanLiteral","IntegerLiteral","LEGACY_COLON","LEGACY_DOT","LEGACY_ID","LegacyIntegerLiteral","LEGACY_EXPR_XPEND","LegacyPlaceHolderModifierDate","LegacyPlaceholderModifierFormat","LegacyPlaceholderModifierJoin","LegacyPlaceHolderModifierOffsetFormat","LEGACY_ARGS_COLON","LEGACY_PLACEHOLDER_XPEND","LEGACY_ARGS_XPEND","LegacyPlaceholderArgs"]),(0,s.A)(de,"modeNames",["DEFAULT_MODE","EXPR_MODE","LEGACY_EXPR_MODE","LEGACY_PLACEHOLDER_MODE","LEGACY_ARGS_MODE"]),(0,s.A)(de,"ruleNames",["TEXT","XPSTART","LEGACY_XPSTART","WS","StringLiteral","ESCAPE","EXPR_WS","XPEND","PIPE","COMMA","LPAREN","RPAREN","DOT","ID","BooleanLiteral","IntegerLiteral","LEGACY_COLON","LEGACY_DOT","LEGACY_ID","LegacyIntegerLiteral","LEGACY_EXPR_XPEND","LegacyPlaceHolderModifierDate","LegacyPlaceholderModifierFormat","LegacyPlaceholderModifierJoin","LegacyPlaceHolderModifierOffsetFormat","LEGACY_ARGS_COLON","LEGACY_PLACEHOLDER_XPEND","LEGACY_ARGS_XPEND","LegacyPlaceholderArgs"]),(0,s.A)(de,"_serializedATN",[4,0,28,245,6,-1,6,-1,6,-1,6,-1,6,-1,2,0,7,0,2,1,7,1,2,2,7,2,2,3,7,3,2,4,7,4,2,5,7,5,2,6,7,6,2,7,7,7,2,8,7,8,2,9,7,9,2,10,7,10,2,11,7,11,2,12,7,12,2,13,7,13,2,14,7,14,2,15,7,15,2,16,7,16,2,17,7,17,2,18,7,18,2,19,7,19,2,20,7,20,2,21,7,21,2,22,7,22,2,23,7,23,2,24,7,24,2,25,7,25,2,26,7,26,2,27,7,27,2,28,7,28,1,0,1,0,1,0,1,0,1,0,4,0,69,8,0,11,0,12,0,70,1,0,1,0,1,0,1,0,3,0,77,8,0,1,1,1,1,1,1,1,1,1,1,1,2,1,2,1,2,1,2,1,2,1,3,4,3,90,8,3,11,3,12,3,91,1,3,1,3,1,4,1,4,1,4,5,4,99,8,4,10,4,12,4,102,9,4,1,4,1,4,1,4,1,4,5,4,108,8,4,10,4,12,4,111,9,4,1,4,3,4,114,8,4,1,4,1,4,1,5,1,5,1,5,1,6,4,6,122,8,6,11,6,12,6,123,1,6,1,6,1,7,1,7,1,7,1,7,1,7,1,8,1,8,1,9,1,9,1,10,1,10,1,11,1,11,1,12,1,12,1,13,1,13,5,13,145,8,13,10,13,12,13,148,9,13,1,14,1,14,1,14,1,14,1,14,1,14,1,14,1,14,1,14,3,14,159,8,14,1,15,1,15,1,15,5,15,164,8,15,10,15,12,15,167,9,15,3,15,169,8,15,1,16,1,16,1,16,1,16,1,17,1,17,1,18,1,18,5,18,179,8,18,10,18,12,18,182,9,18,1,19,1,19,1,19,5,19,187,8,19,10,19,12,19,190,9,19,3,19,192,8,19,1,20,1,20,1,20,1,20,1,21,1,21,1,21,1,21,1,21,1,22,1,22,1,22,1,22,1,22,1,22,1,22,1,23,1,23,1,23,1,23,1,23,1,24,1,24,1,24,1,24,1,24,1,24,1,24,1,24,1,24,1,24,1,24,1,24,1,24,1,24,1,25,1,25,1,25,1,25,1,26,1,26,1,26,1,26,1,27,1,27,1,27,1,27,1,28,4,28,242,8,28,11,28,12,28,243,2,100,109,0,29,5,2,7,3,9,4,11,5,13,0,15,0,17,6,19,7,21,8,23,9,25,10,27,11,29,12,31,13,33,14,35,15,37,16,39,17,41,18,43,19,45,20,47,21,49,22,51,23,53,24,55,25,57,26,59,27,61,28,5,0,1,2,3,4,10,2,0,36,36,123,123,1,0,123,123,3,0,9,10,13,13,32,32,4,0,10,10,13,13,34,34,92,92,4,0,10,10,13,13,39,39,92,92,1,0,97,122,4,0,48,57,65,90,95,95,97,122,1,0,49,57,1,0,48,57,1,0,125,125,259,0,5,1,0,0,0,0,7,1,0,0,0,0,9,1,0,0,0,0,11,1,0,0,0,1,13,1,0,0,0,1,17,1,0,0,0,1,19,1,0,0,0,1,21,1,0,0,0,1,23,1,0,0,0,1,25,1,0,0,0,1,27,1,0,0,0,1,29,1,0,0,0,1,31,1,0,0,0,1,33,1,0,0,0,1,35,1,0,0,0,2,37,1,0,0,0,2,39,1,0,0,0,2,41,1,0,0,0,2,43,1,0,0,0,2,45,1,0,0,0,3,47,1,0,0,0,3,49,1,0,0,0,3,51,1,0,0,0,3,53,1,0,0,0,3,55,1,0,0,0,3,57,1,0,0,0,4,59,1,0,0,0,4,61,1,0,0,0,5,76,1,0,0,0,7,78,1,0,0,0,9,83,1,0,0,0,11,89,1,0,0,0,13,113,1,0,0,0,15,117,1,0,0,0,17,121,1,0,0,0,19,127,1,0,0,0,21,132,1,0,0,0,23,134,1,0,0,0,25,136,1,0,0,0,27,138,1,0,0,0,29,140,1,0,0,0,31,142,1,0,0,0,33,158,1,0,0,0,35,168,1,0,0,0,37,170,1,0,0,0,39,174,1,0,0,0,41,176,1,0,0,0,43,191,1,0,0,0,45,193,1,0,0,0,47,197,1,0,0,0,49,202,1,0,0,0,51,209,1,0,0,0,53,214,1,0,0,0,55,228,1,0,0,0,57,232,1,0,0,0,59,236,1,0,0,0,61,241,1,0,0,0,63,69,8,0,0,0,64,65,5,123,0,0,65,69,8,1,0,0,66,67,5,36,0,0,67,69,8,1,0,0,68,63,1,0,0,0,68,64,1,0,0,0,68,66,1,0,0,0,69,70,1,0,0,0,70,68,1,0,0,0,70,71,1,0,0,0,71,77,1,0,0,0,72,73,5,36,0,0,73,77,5,0,0,1,74,75,5,123,0,0,75,77,5,0,0,1,76,68,1,0,0,0,76,72,1,0,0,0,76,74,1,0,0,0,77,6,1,0,0,0,78,79,5,123,0,0,79,80,5,123,0,0,80,81,1,0,0,0,81,82,6,1,0,0,82,8,1,0,0,0,83,84,5,36,0,0,84,85,5,123,0,0,85,86,1,0,0,0,86,87,6,2,1,0,87,10,1,0,0,0,88,90,7,2,0,0,89,88,1,0,0,0,90,91,1,0,0,0,91,89,1,0,0,0,91,92,1,0,0,0,92,93,1,0,0,0,93,94,6,3,2,0,94,12,1,0,0,0,95,100,5,34,0,0,96,99,3,15,5,0,97,99,8,3,0,0,98,96,1,0,0,0,98,97,1,0,0,0,99,102,1,0,0,0,100,101,1,0,0,0,100,98,1,0,0,0,101,103,1,0,0,0,102,100,1,0,0,0,103,114,5,34,0,0,104,109,5,39,0,0,105,108,3,15,5,0,106,108,8,4,0,0,107,105,1,0,0,0,107,106,1,0,0,0,108,111,1,0,0,0,109,110,1,0,0,0,109,107,1,0,0,0,110,112,1,0,0,0,111,109,1,0,0,0,112,114,5,39,0,0,113,95,1,0,0,0,113,104,1,0,0,0,114,115,1,0,0,0,115,116,6,4,3,0,116,14,1,0,0,0,117,118,5,92,0,0,118,119,9,0,0,0,119,16,1,0,0,0,120,122,7,2,0,0,121,120,1,0,0,0,122,123,1,0,0,0,123,121,1,0,0,0,123,124,1,0,0,0,124,125,1,0,0,0,125,126,6,6,2,0,126,18,1,0,0,0,127,128,5,125,0,0,128,129,5,125,0,0,129,130,1,0,0,0,130,131,6,7,4,0,131,20,1,0,0,0,132,133,5,124,0,0,133,22,1,0,0,0,134,135,5,44,0,0,135,24,1,0,0,0,136,137,5,40,0,0,137,26,1,0,0,0,138,139,5,41,0,0,139,28,1,0,0,0,140,141,5,46,0,0,141,30,1,0,0,0,142,146,7,5,0,0,143,145,7,6,0,0,144,143,1,0,0,0,145,148,1,0,0,0,146,144,1,0,0,0,146,147,1,0,0,0,147,32,1,0,0,0,148,146,1,0,0,0,149,150,5,116,0,0,150,151,5,114,0,0,151,152,5,117,0,0,152,159,5,101,0,0,153,154,5,102,0,0,154,155,5,97,0,0,155,156,5,108,0,0,156,157,5,115,0,0,157,159,5,101,0,0,158,149,1,0,0,0,158,153,1,0,0,0,159,34,1,0,0,0,160,169,5,48,0,0,161,165,7,7,0,0,162,164,7,8,0,0,163,162,1,0,0,0,164,167,1,0,0,0,165,163,1,0,0,0,165,166,1,0,0,0,166,169,1,0,0,0,167,165,1,0,0,0,168,160,1,0,0,0,168,161,1,0,0,0,169,36,1,0,0,0,170,171,5,58,0,0,171,172,1,0,0,0,172,173,6,16,5,0,173,38,1,0,0,0,174,175,5,46,0,0,175,40,1,0,0,0,176,180,7,5,0,0,177,179,7,6,0,0,178,177,1,0,0,0,179,182,1,0,0,0,180,178,1,0,0,0,180,181,1,0,0,0,181,42,1,0,0,0,182,180,1,0,0,0,183,192,5,48,0,0,184,188,7,7,0,0,185,187,7,8,0,0,186,185,1,0,0,0,187,190,1,0,0,0,188,186,1,0,0,0,188,189,1,0,0,0,189,192,1,0,0,0,190,188,1,0,0,0,191,183,1,0,0,0,191,184,1,0,0,0,192,44,1,0,0,0,193,194,5,125,0,0,194,195,1,0,0,0,195,196,6,20,4,0,196,46,1,0,0,0,197,198,5,100,0,0,198,199,5,97,0,0,199,200,5,116,0,0,200,201,5,101,0,0,201,48,1,0,0,0,202,203,5,102,0,0,203,204,5,111,0,0,204,205,5,114,0,0,205,206,5,109,0,0,206,207,5,97,0,0,207,208,5,116,0,0,208,50,1,0,0,0,209,210,5,106,0,0,210,211,5,111,0,0,211,212,5,105,0,0,212,213,5,110,0,0,213,52,1,0,0,0,214,215,5,111,0,0,215,216,5,102,0,0,216,217,5,102,0,0,217,218,5,115,0,0,218,219,5,101,0,0,219,220,5,116,0,0,220,221,5,45,0,0,221,222,5,102,0,0,222,223,5,111,0,0,223,224,5,114,0,0,224,225,5,109,0,0,225,226,5,97,0,0,226,227,5,116,0,0,227,54,1,0,0,0,228,229,5,58,0,0,229,230,1,0,0,0,230,231,6,25,6,0,231,56,1,0,0,0,232,233,5,125,0,0,233,234,1,0,0,0,234,235,6,26,4,0,235,58,1,0,0,0,236,237,5,125,0,0,237,238,1,0,0,0,238,239,6,27,4,0,239,60,1,0,0,0,240,242,8,9,0,0,241,240,1,0,0,0,242,243,1,0,0,0,243,241,1,0,0,0,243,244,1,0,0,0,244,62,1,0,0,0,23,0,1,2,3,4,68,70,76,91,98,100,107,109,113,123,146,158,165,168,180,188,191,243,7,2,1,0,2,2,0,6,0,0,7,1,0,2,0,0,2,3,0,2,4,0]),(0,s.A)(de,"__ATN",void 0),(0,s.A)(de,"vocabulary",new i.VI(ce.literalNames,ce.symbolicNames,[])),(0,s.A)(de,"decisionsToDFA",ce._ATN.decisionToState.map(((e,t)=>new i.M8(e,t))));class ue extends i.iX{get grammarFileName(){return"ExprParser.g4"}get literalNames(){return ue.literalNames}get symbolicNames(){return ue.symbolicNames}get ruleNames(){return ue.ruleNames}get serializedATN(){return ue._serializedATN}createFailedPredicateException(e,t){return new i.Nr(this,e,t)}constructor(e){super(e),this.interpreter=new i.re(this,ue._ATN,ue.decisionsToDFA,new i.tD)}template(){let e,t=new me(this.context,this.state);this.enterRule(t,0,ue.RULE_template);try{for(this.enterOuterAlt(t,1),this.state=37,this.errorHandler.sync(this),e=this.tokenStream.LA(1);!(-32&e)&&1<<e&28;)this.state=34,this.templatePart(),this.state=39,this.errorHandler.sync(this),e=this.tokenStream.LA(1);this.state=40,this.match(ue.EOF)}catch(r){if(!(r instanceof i.Dj))throw r;this.errorHandler.reportError(this,r),this.errorHandler.recover(this,r)}finally{this.exitRule()}return t}templatePart(){let e=new ge(this.context,this.state);this.enterRule(e,2,ue.RULE_templatePart);try{switch(this.state=45,this.errorHandler.sync(this),this.tokenStream.LA(1)){case ue.TEXT:this.enterOuterAlt(e,1),this.state=42,this.text();break;case ue.XPSTART:this.enterOuterAlt(e,2),this.state=43,this.expr();break;case ue.LEGACY_XPSTART:this.enterOuterAlt(e,3),this.state=44,this.legacyExpr();break;default:throw new i.X2(this)}}catch(t){if(!(t instanceof i.Dj))throw t;this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t)}finally{this.exitRule()}return e}text(){let e=new Ae(this.context,this.state);this.enterRule(e,4,ue.RULE_text);try{this.enterOuterAlt(e,1),this.state=47,this.match(ue.TEXT)}catch(t){if(!(t instanceof i.Dj))throw t;this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t)}finally{this.exitRule()}return e}expr(){let e,t=new fe(this.context,this.state);this.enterRule(t,6,ue.RULE_expr);try{this.enterOuterAlt(t,1),this.state=49,this.match(ue.XPSTART),this.state=50,this.dataRefName(),this.state=52,this.errorHandler.sync(this),e=this.tokenStream.LA(1),8===e&&(this.state=51,this.filterChain()),this.state=54,this.match(ue.XPEND)}catch(r){if(!(r instanceof i.Dj))throw r;this.errorHandler.reportError(this,r),this.errorHandler.recover(this,r)}finally{this.exitRule()}return t}dataRefName(){let e=new Ee(this.context,this.state);this.enterRule(e,8,ue.RULE_dataRefName);try{this.enterOuterAlt(e,1),this.state=56,this.refObjectName(),this.state=57,this.refAttrName()}catch(t){if(!(t instanceof i.Dj))throw t;this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t)}finally{this.exitRule()}return e}refObjectName(){let e=new Re(this.context,this.state);this.enterRule(e,10,ue.RULE_refObjectName);try{this.enterOuterAlt(e,1),this.state=59,this.match(ue.ID)}catch(t){if(!(t instanceof i.Dj))throw t;this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t)}finally{this.exitRule()}return e}refAttrName(){let e,t=new pe(this.context,this.state);this.enterRule(t,12,ue.RULE_refAttrName);try{this.enterOuterAlt(t,1),this.state=63,this.errorHandler.sync(this),e=this.tokenStream.LA(1);do{this.state=61,this.match(ue.DOT),this.state=62,e=this.tokenStream.LA(1),13!==e&&15!==e?this.errorHandler.recoverInline(this):(this.errorHandler.reportMatch(this),this.consume()),this.state=65,this.errorHandler.sync(this),e=this.tokenStream.LA(1)}while(12===e)}catch(r){if(!(r instanceof i.Dj))throw r;this.errorHandler.reportError(this,r),this.errorHandler.recover(this,r)}finally{this.exitRule()}return t}filterChain(){let e,t=new xe(this.context,this.state);this.enterRule(t,14,ue.RULE_filterChain);try{this.enterOuterAlt(t,1),this.state=69,this.errorHandler.sync(this),e=this.tokenStream.LA(1);do{this.state=67,this.match(ue.PIPE),this.state=68,this.filterExpr(),this.state=71,this.errorHandler.sync(this),e=this.tokenStream.LA(1)}while(8===e)}catch(r){if(!(r instanceof i.Dj))throw r;this.errorHandler.reportError(this,r),this.errorHandler.recover(this,r)}finally{this.exitRule()}return t}filterExpr(){let e,t=new ye(this.context,this.state);this.enterRule(t,16,ue.RULE_filterExpr);try{this.enterOuterAlt(t,1),this.state=73,this.filterName(),this.state=74,this.match(ue.LPAREN),this.state=76,this.errorHandler.sync(this),e=this.tokenStream.LA(1),!(-32&e)&&1<<e&49154&&(this.state=75,this.filterArgs()),this.state=78,this.match(ue.RPAREN)}catch(r){if(!(r instanceof i.Dj))throw r;this.errorHandler.reportError(this,r),this.errorHandler.recover(this,r)}finally{this.exitRule()}return t}filterName(){let e=new Le(this.context,this.state);this.enterRule(e,18,ue.RULE_filterName);try{this.enterOuterAlt(e,1),this.state=80,this.match(ue.ID)}catch(t){if(!(t instanceof i.Dj))throw t;this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t)}finally{this.exitRule()}return e}filterArgs(){let e,t=new _e(this.context,this.state);this.enterRule(t,20,ue.RULE_filterArgs);try{for(this.enterOuterAlt(t,1),this.state=82,this.filterArg(),this.state=87,this.errorHandler.sync(this),e=this.tokenStream.LA(1);9===e;)this.state=83,this.match(ue.COMMA),this.state=84,this.filterArg(),this.state=89,this.errorHandler.sync(this),e=this.tokenStream.LA(1)}catch(r){if(!(r instanceof i.Dj))throw r;this.errorHandler.reportError(this,r),this.errorHandler.recover(this,r)}finally{this.exitRule()}return t}filterArg(){let e,t=new Pe(this.context,this.state);this.enterRule(t,22,ue.RULE_filterArg);try{this.enterOuterAlt(t,1),this.state=90,e=this.tokenStream.LA(1),-32&e||!(1<<e&49154)?this.errorHandler.recoverInline(this):(this.errorHandler.reportMatch(this),this.consume())}catch(r){if(!(r instanceof i.Dj))throw r;this.errorHandler.reportError(this,r),this.errorHandler.recover(this,r)}finally{this.exitRule()}return t}legacyExpr(){let e,t=new Ne(this.context,this.state);this.enterRule(t,24,ue.RULE_legacyExpr);try{this.enterOuterAlt(t,1),this.state=92,this.match(ue.LEGACY_XPSTART),this.state=93,this.legacyDataRefName(),this.state=96,this.errorHandler.sync(this),e=this.tokenStream.LA(1),16===e&&(this.state=94,this.match(ue.LEGACY_COLON),this.state=95,this.legacyPlaceholderExpr()),this.state=98,e=this.tokenStream.LA(1),-32&e||!(1<<e&202375168)?this.errorHandler.recoverInline(this):(this.errorHandler.reportMatch(this),this.consume())}catch(r){if(!(r instanceof i.Dj))throw r;this.errorHandler.reportError(this,r),this.errorHandler.recover(this,r)}finally{this.exitRule()}return t}legacyDataRefName(){let e=new Te(this.context,this.state);this.enterRule(e,26,ue.RULE_legacyDataRefName);try{this.enterOuterAlt(e,1),this.state=100,this.legacyRefObjectName(),this.state=101,this.legacyRefAttrName()}catch(t){if(!(t instanceof i.Dj))throw t;this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t)}finally{this.exitRule()}return e}legacyRefObjectName(){let e=new De(this.context,this.state);this.enterRule(e,28,ue.RULE_legacyRefObjectName);try{this.enterOuterAlt(e,1),this.state=103,this.match(ue.LEGACY_ID)}catch(t){if(!(t instanceof i.Dj))throw t;this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t)}finally{this.exitRule()}return e}legacyRefAttrName(){let e,t=new je(this.context,this.state);this.enterRule(t,30,ue.RULE_legacyRefAttrName);try{this.enterOuterAlt(t,1),this.state=107,this.errorHandler.sync(this),e=this.tokenStream.LA(1);do{this.state=105,this.match(ue.LEGACY_DOT),this.state=106,e=this.tokenStream.LA(1),18!==e&&19!==e?this.errorHandler.recoverInline(this):(this.errorHandler.reportMatch(this),this.consume()),this.state=109,this.errorHandler.sync(this),e=this.tokenStream.LA(1)}while(17===e)}catch(r){if(!(r instanceof i.Dj))throw r;this.errorHandler.reportError(this,r),this.errorHandler.recover(this,r)}finally{this.exitRule()}return t}legacyPlaceholderExpr(){let e,t=new Ce(this.context,this.state);this.enterRule(t,32,ue.RULE_legacyPlaceholderExpr);try{this.enterOuterAlt(t,1),this.state=111,e=this.tokenStream.LA(1),-32&e||!(1<<e&31457280)?this.errorHandler.recoverInline(this):(this.errorHandler.reportMatch(this),this.consume()),this.state=114,this.errorHandler.sync(this),e=this.tokenStream.LA(1),25===e&&(this.state=112,this.match(ue.LEGACY_ARGS_COLON),this.state=113,this.match(ue.LegacyPlaceholderArgs))}catch(r){if(!(r instanceof i.Dj))throw r;this.errorHandler.reportError(this,r),this.errorHandler.recover(this,r)}finally{this.exitRule()}return t}static get _ATN(){return ue.__ATN||(ue.__ATN=(new i.fr).deserialize(ue._serializedATN)),ue.__ATN}get vocabulary(){return ue.vocabulary}}he=ue,(0,s.A)(ue,"STRING",1),(0,s.A)(ue,"TEXT",2),(0,s.A)(ue,"XPSTART",3),(0,s.A)(ue,"LEGACY_XPSTART",4),(0,s.A)(ue,"WS",5),(0,s.A)(ue,"EXPR_WS",6),(0,s.A)(ue,"XPEND",7),(0,s.A)(ue,"PIPE",8),(0,s.A)(ue,"COMMA",9),(0,s.A)(ue,"LPAREN",10),(0,s.A)(ue,"RPAREN",11),(0,s.A)(ue,"DOT",12),(0,s.A)(ue,"ID",13),(0,s.A)(ue,"BooleanLiteral",14),(0,s.A)(ue,"IntegerLiteral",15),(0,s.A)(ue,"LEGACY_COLON",16),(0,s.A)(ue,"LEGACY_DOT",17),(0,s.A)(ue,"LEGACY_ID",18),(0,s.A)(ue,"LegacyIntegerLiteral",19),(0,s.A)(ue,"LEGACY_EXPR_XPEND",20),(0,s.A)(ue,"LegacyPlaceHolderModifierDate",21),(0,s.A)(ue,"LegacyPlaceholderModifierFormat",22),(0,s.A)(ue,"LegacyPlaceholderModifierJoin",23),(0,s.A)(ue,"LegacyPlaceHolderModifierOffsetFormat",24),(0,s.A)(ue,"LEGACY_ARGS_COLON",25),(0,s.A)(ue,"LEGACY_PLACEHOLDER_XPEND",26),(0,s.A)(ue,"LEGACY_ARGS_XPEND",27),(0,s.A)(ue,"LegacyPlaceholderArgs",28),(0,s.A)(ue,"RULE_template",0),(0,s.A)(ue,"RULE_templatePart",1),(0,s.A)(ue,"RULE_text",2),(0,s.A)(ue,"RULE_expr",3),(0,s.A)(ue,"RULE_dataRefName",4),(0,s.A)(ue,"RULE_refObjectName",5),(0,s.A)(ue,"RULE_refAttrName",6),(0,s.A)(ue,"RULE_filterChain",7),(0,s.A)(ue,"RULE_filterExpr",8),(0,s.A)(ue,"RULE_filterName",9),(0,s.A)(ue,"RULE_filterArgs",10),(0,s.A)(ue,"RULE_filterArg",11),(0,s.A)(ue,"RULE_legacyExpr",12),(0,s.A)(ue,"RULE_legacyDataRefName",13),(0,s.A)(ue,"RULE_legacyRefObjectName",14),(0,s.A)(ue,"RULE_legacyRefAttrName",15),(0,s.A)(ue,"RULE_legacyPlaceholderExpr",16),(0,s.A)(ue,"literalNames",[null,null,null,"'{{'","'${'",null,null,"'}}'","'|'","','","'('","')'",null,null,null,null,null,null,null,null,null,"'date'","'format'","'join'","'offset-format'"]),(0,s.A)(ue,"symbolicNames",[null,"STRING","TEXT","XPSTART","LEGACY_XPSTART","WS","EXPR_WS","XPEND","PIPE","COMMA","LPAREN","RPAREN","DOT","ID","BooleanLiteral","IntegerLiteral","LEGACY_COLON","LEGACY_DOT","LEGACY_ID","LegacyIntegerLiteral","LEGACY_EXPR_XPEND","LegacyPlaceHolderModifierDate","LegacyPlaceholderModifierFormat","LegacyPlaceholderModifierJoin","LegacyPlaceHolderModifierOffsetFormat","LEGACY_ARGS_COLON","LEGACY_PLACEHOLDER_XPEND","LEGACY_ARGS_XPEND","LegacyPlaceholderArgs"]),(0,s.A)(ue,"ruleNames",["template","templatePart","text","expr","dataRefName","refObjectName","refAttrName","filterChain","filterExpr","filterName","filterArgs","filterArg","legacyExpr","legacyDataRefName","legacyRefObjectName","legacyRefAttrName","legacyPlaceholderExpr"]),(0,s.A)(ue,"_serializedATN",[4,1,28,117,2,0,7,0,2,1,7,1,2,2,7,2,2,3,7,3,2,4,7,4,2,5,7,5,2,6,7,6,2,7,7,7,2,8,7,8,2,9,7,9,2,10,7,10,2,11,7,11,2,12,7,12,2,13,7,13,2,14,7,14,2,15,7,15,2,16,7,16,1,0,5,0,36,8,0,10,0,12,0,39,9,0,1,0,1,0,1,1,1,1,1,1,3,1,46,8,1,1,2,1,2,1,3,1,3,1,3,3,3,53,8,3,1,3,1,3,1,4,1,4,1,4,1,5,1,5,1,6,1,6,4,6,64,8,6,11,6,12,6,65,1,7,1,7,4,7,70,8,7,11,7,12,7,71,1,8,1,8,1,8,3,8,77,8,8,1,8,1,8,1,9,1,9,1,10,1,10,1,10,5,10,86,8,10,10,10,12,10,89,9,10,1,11,1,11,1,12,1,12,1,12,1,12,3,12,97,8,12,1,12,1,12,1,13,1,13,1,13,1,14,1,14,1,15,1,15,4,15,108,8,15,11,15,12,15,109,1,16,1,16,1,16,3,16,115,8,16,1,16,0,0,17,0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,0,5,2,0,13,13,15,15,2,0,1,1,14,15,2,0,20,20,26,27,1,0,18,19,1,0,21,24,110,0,37,1,0,0,0,2,45,1,0,0,0,4,47,1,0,0,0,6,49,1,0,0,0,8,56,1,0,0,0,10,59,1,0,0,0,12,63,1,0,0,0,14,69,1,0,0,0,16,73,1,0,0,0,18,80,1,0,0,0,20,82,1,0,0,0,22,90,1,0,0,0,24,92,1,0,0,0,26,100,1,0,0,0,28,103,1,0,0,0,30,107,1,0,0,0,32,111,1,0,0,0,34,36,3,2,1,0,35,34,1,0,0,0,36,39,1,0,0,0,37,35,1,0,0,0,37,38,1,0,0,0,38,40,1,0,0,0,39,37,1,0,0,0,40,41,5,0,0,1,41,1,1,0,0,0,42,46,3,4,2,0,43,46,3,6,3,0,44,46,3,24,12,0,45,42,1,0,0,0,45,43,1,0,0,0,45,44,1,0,0,0,46,3,1,0,0,0,47,48,5,2,0,0,48,5,1,0,0,0,49,50,5,3,0,0,50,52,3,8,4,0,51,53,3,14,7,0,52,51,1,0,0,0,52,53,1,0,0,0,53,54,1,0,0,0,54,55,5,7,0,0,55,7,1,0,0,0,56,57,3,10,5,0,57,58,3,12,6,0,58,9,1,0,0,0,59,60,5,13,0,0,60,11,1,0,0,0,61,62,5,12,0,0,62,64,7,0,0,0,63,61,1,0,0,0,64,65,1,0,0,0,65,63,1,0,0,0,65,66,1,0,0,0,66,13,1,0,0,0,67,68,5,8,0,0,68,70,3,16,8,0,69,67,1,0,0,0,70,71,1,0,0,0,71,69,1,0,0,0,71,72,1,0,0,0,72,15,1,0,0,0,73,74,3,18,9,0,74,76,5,10,0,0,75,77,3,20,10,0,76,75,1,0,0,0,76,77,1,0,0,0,77,78,1,0,0,0,78,79,5,11,0,0,79,17,1,0,0,0,80,81,5,13,0,0,81,19,1,0,0,0,82,87,3,22,11,0,83,84,5,9,0,0,84,86,3,22,11,0,85,83,1,0,0,0,86,89,1,0,0,0,87,85,1,0,0,0,87,88,1,0,0,0,88,21,1,0,0,0,89,87,1,0,0,0,90,91,7,1,0,0,91,23,1,0,0,0,92,93,5,4,0,0,93,96,3,26,13,0,94,95,5,16,0,0,95,97,3,32,16,0,96,94,1,0,0,0,96,97,1,0,0,0,97,98,1,0,0,0,98,99,7,2,0,0,99,25,1,0,0,0,100,101,3,28,14,0,101,102,3,30,15,0,102,27,1,0,0,0,103,104,5,18,0,0,104,29,1,0,0,0,105,106,5,17,0,0,106,108,7,3,0,0,107,105,1,0,0,0,108,109,1,0,0,0,109,107,1,0,0,0,109,110,1,0,0,0,110,31,1,0,0,0,111,114,7,4,0,0,112,113,5,25,0,0,113,115,5,28,0,0,114,112,1,0,0,0,114,115,1,0,0,0,115,33,1,0,0,0,10,37,45,52,65,71,76,87,96,109,114]),(0,s.A)(ue,"__ATN",void 0),(0,s.A)(ue,"vocabulary",new i.VI(he.literalNames,he.symbolicNames,[])),(0,s.A)(ue,"decisionsToDFA",he._ATN.decisionToState.map(((e,t)=>new i.M8(e,t))));class me extends i.Pg{constructor(e,t){super(e,t)}EOF(){return this.getToken(ue.EOF,0)}templatePart(e){return void 0===e?this.getRuleContexts(ge):this.getRuleContext(e,ge)}get ruleIndex(){return ue.RULE_template}enterRule(e){e.enterTemplate&&e.enterTemplate(this)}exitRule(e){e.exitTemplate&&e.exitTemplate(this)}}class ge extends i.Pg{constructor(e,t){super(e,t)}text(){return this.getRuleContext(0,Ae)}expr(){return this.getRuleContext(0,fe)}legacyExpr(){return this.getRuleContext(0,Ne)}get ruleIndex(){return ue.RULE_templatePart}enterRule(e){e.enterTemplatePart&&e.enterTemplatePart(this)}exitRule(e){e.exitTemplatePart&&e.exitTemplatePart(this)}}class Ae extends i.Pg{constructor(e,t){super(e,t)}TEXT(){return this.getToken(ue.TEXT,0)}get ruleIndex(){return ue.RULE_text}enterRule(e){e.enterText&&e.enterText(this)}exitRule(e){e.exitText&&e.exitText(this)}}class fe extends i.Pg{constructor(e,t){super(e,t)}XPSTART(){return this.getToken(ue.XPSTART,0)}dataRefName(){return this.getRuleContext(0,Ee)}XPEND(){return this.getToken(ue.XPEND,0)}filterChain(){return this.getRuleContext(0,xe)}get ruleIndex(){return ue.RULE_expr}enterRule(e){e.enterExpr&&e.enterExpr(this)}exitRule(e){e.exitExpr&&e.exitExpr(this)}}class Ee extends i.Pg{constructor(e,t){super(e,t)}refObjectName(){return this.getRuleContext(0,Re)}refAttrName(){return this.getRuleContext(0,pe)}get ruleIndex(){return ue.RULE_dataRefName}enterRule(e){e.enterDataRefName&&e.enterDataRefName(this)}exitRule(e){e.exitDataRefName&&e.exitDataRefName(this)}}class Re extends i.Pg{constructor(e,t){super(e,t)}ID(){return this.getToken(ue.ID,0)}get ruleIndex(){return ue.RULE_refObjectName}enterRule(e){e.enterRefObjectName&&e.enterRefObjectName(this)}exitRule(e){e.exitRefObjectName&&e.exitRefObjectName(this)}}class pe extends i.Pg{constructor(e,t){super(e,t)}DOT(e){return void 0===e?this.getTokens(ue.DOT):this.getToken(ue.DOT,e)}ID(e){return void 0===e?this.getTokens(ue.ID):this.getToken(ue.ID,e)}IntegerLiteral(e){return void 0===e?this.getTokens(ue.IntegerLiteral):this.getToken(ue.IntegerLiteral,e)}get ruleIndex(){return ue.RULE_refAttrName}enterRule(e){e.enterRefAttrName&&e.enterRefAttrName(this)}exitRule(e){e.exitRefAttrName&&e.exitRefAttrName(this)}}class xe extends i.Pg{constructor(e,t){super(e,t)}PIPE(e){return void 0===e?this.getTokens(ue.PIPE):this.getToken(ue.PIPE,e)}filterExpr(e){return void 0===e?this.getRuleContexts(ye):this.getRuleContext(e,ye)}get ruleIndex(){return ue.RULE_filterChain}enterRule(e){e.enterFilterChain&&e.enterFilterChain(this)}exitRule(e){e.exitFilterChain&&e.exitFilterChain(this)}}class ye extends i.Pg{constructor(e,t){super(e,t)}filterName(){return this.getRuleContext(0,Le)}LPAREN(){return this.getToken(ue.LPAREN,0)}RPAREN(){return this.getToken(ue.RPAREN,0)}filterArgs(){return this.getRuleContext(0,_e)}get ruleIndex(){return ue.RULE_filterExpr}enterRule(e){e.enterFilterExpr&&e.enterFilterExpr(this)}exitRule(e){e.exitFilterExpr&&e.exitFilterExpr(this)}}class Le extends i.Pg{constructor(e,t){super(e,t)}ID(){return this.getToken(ue.ID,0)}get ruleIndex(){return ue.RULE_filterName}enterRule(e){e.enterFilterName&&e.enterFilterName(this)}exitRule(e){e.exitFilterName&&e.exitFilterName(this)}}class _e extends i.Pg{constructor(e,t){super(e,t)}filterArg(e){return void 0===e?this.getRuleContexts(Pe):this.getRuleContext(e,Pe)}COMMA(e){return void 0===e?this.getTokens(ue.COMMA):this.getToken(ue.COMMA,e)}get ruleIndex(){return ue.RULE_filterArgs}enterRule(e){e.enterFilterArgs&&e.enterFilterArgs(this)}exitRule(e){e.exitFilterArgs&&e.exitFilterArgs(this)}}class Pe extends i.Pg{constructor(e,t){super(e,t)}BooleanLiteral(){return this.getToken(ue.BooleanLiteral,0)}IntegerLiteral(){return this.getToken(ue.IntegerLiteral,0)}STRING(){return this.getToken(ue.STRING,0)}get ruleIndex(){return ue.RULE_filterArg}enterRule(e){e.enterFilterArg&&e.enterFilterArg(this)}exitRule(e){e.exitFilterArg&&e.exitFilterArg(this)}}class Ne extends i.Pg{constructor(e,t){super(e,t)}LEGACY_XPSTART(){return this.getToken(ue.LEGACY_XPSTART,0)}legacyDataRefName(){return this.getRuleContext(0,Te)}LEGACY_EXPR_XPEND(){return this.getToken(ue.LEGACY_EXPR_XPEND,0)}LEGACY_PLACEHOLDER_XPEND(){return this.getToken(ue.LEGACY_PLACEHOLDER_XPEND,0)}LEGACY_ARGS_XPEND(){return this.getToken(ue.LEGACY_ARGS_XPEND,0)}LEGACY_COLON(){return this.getToken(ue.LEGACY_COLON,0)}legacyPlaceholderExpr(){return this.getRuleContext(0,Ce)}get ruleIndex(){return ue.RULE_legacyExpr}enterRule(e){e.enterLegacyExpr&&e.enterLegacyExpr(this)}exitRule(e){e.exitLegacyExpr&&e.exitLegacyExpr(this)}}class Te extends i.Pg{constructor(e,t){super(e,t)}legacyRefObjectName(){return this.getRuleContext(0,De)}legacyRefAttrName(){return this.getRuleContext(0,je)}get ruleIndex(){return ue.RULE_legacyDataRefName}enterRule(e){e.enterLegacyDataRefName&&e.enterLegacyDataRefName(this)}exitRule(e){e.exitLegacyDataRefName&&e.exitLegacyDataRefName(this)}}class De extends i.Pg{constructor(e,t){super(e,t)}LEGACY_ID(){return this.getToken(ue.LEGACY_ID,0)}get ruleIndex(){return ue.RULE_legacyRefObjectName}enterRule(e){e.enterLegacyRefObjectName&&e.enterLegacyRefObjectName(this)}exitRule(e){e.exitLegacyRefObjectName&&e.exitLegacyRefObjectName(this)}}class je extends i.Pg{constructor(e,t){super(e,t)}LEGACY_DOT(e){return void 0===e?this.getTokens(ue.LEGACY_DOT):this.getToken(ue.LEGACY_DOT,e)}LEGACY_ID(e){return void 0===e?this.getTokens(ue.LEGACY_ID):this.getToken(ue.LEGACY_ID,e)}LegacyIntegerLiteral(e){return void 0===e?this.getTokens(ue.LegacyIntegerLiteral):this.getToken(ue.LegacyIntegerLiteral,e)}get ruleIndex(){return ue.RULE_legacyRefAttrName}enterRule(e){e.enterLegacyRefAttrName&&e.enterLegacyRefAttrName(this)}exitRule(e){e.exitLegacyRefAttrName&&e.exitLegacyRefAttrName(this)}}class Ce extends i.Pg{constructor(e,t){super(e,t)}LegacyPlaceHolderModifierDate(){return this.getToken(ue.LegacyPlaceHolderModifierDate,0)}LegacyPlaceholderModifierFormat(){return this.getToken(ue.LegacyPlaceholderModifierFormat,0)}LegacyPlaceholderModifierJoin(){return this.getToken(ue.LegacyPlaceholderModifierJoin,0)}LegacyPlaceHolderModifierOffsetFormat(){return this.getToken(ue.LegacyPlaceHolderModifierOffsetFormat,0)}LEGACY_ARGS_COLON(){return this.getToken(ue.LEGACY_ARGS_COLON,0)}LegacyPlaceholderArgs(){return this.getToken(ue.LegacyPlaceholderArgs,0)}get ruleIndex(){return ue.RULE_legacyPlaceholderExpr}enterRule(e){e.enterLegacyPlaceholderExpr&&e.enterLegacyPlaceholderExpr(this)}exitRule(e){e.exitLegacyPlaceholderExpr&&e.exitLegacyPlaceholderExpr(this)}}i.MO;let Oe=function(e){return e.BACKUP="backup",e.ERROR="error",e.KEEP="keep",e.REPLACE="replace",e.SKIP="skip",e.UPDATE="update",e}({})},16407:(e,t,r)=>{r.d(t,{$b:()=>c,GJ:()=>m,Pn:()=>h,bR:()=>u,c1:()=>A,we:()=>g});var s=r(4729),i=r(64467),a=r(68420),n=r(45136),o=r(55698),l=(r(95508),r(97158));let c=function(e){return e.TRACE="trace",e.DEBUG="debug",e.INFO="info",e.WARN="warn",e.ERROR="error",e}({}),h=function(e){return e.ADD_THREAD_LABEL="add-label",e.CUSTOM="custom",e.MARK_MESSAGE_READ="mark-read",e}({});class d{constructor(){(0,i.A)(this,"name",""),(0,i.A)(this,"title",""),(0,i.A)(this,"value",void 0),(0,i.A)(this,"ctxValues",{})}}let u=function(e){return e.NONE="none",e.AUTO="auto",e.ALL="all",e}({}),m=(0,s.A)(null,(function(e){return{F:class{constructor(){e(this)}},d:[{kind:"field",key:"defaultTimestampFormat",value:()=>"yyyy-MM-dd HH:mm:ss"},{kind:"field",key:"defaultArrayJoinSeparator",value:()=>","},{kind:"field",decorators:[(0,a.v)()],key:"logSheetLocation",value:()=>""},{kind:"field",decorators:[(0,a.v)()],key:"logFields",value:()=>["log.timestamp","log.level","log.location","log.message","object.id","object.date","object.subject","object.from","object.url","attachment.name","attachment.size","attachment.contentType","stored.location","stored.url","stored.downloadUrl"]},{kind:"field",decorators:[(0,a.v)(),(0,n.Z)((()=>d))],key:"logConfig",value:()=>[{name:"log.timestamp",title:"Timestamp",value:"{{date.now|formatDate('yyyy-MM-dd HH:mm:ss.SSS')}}"},{name:"log.level",title:"Log Level"},{name:"log.message",title:"Log Message"},{name:"context.type",title:"Context Type"},{name:"object.id",title:"ID",ctxValues:{attachment:"{{attachment.hash}}",message:"{{message.id}}",thread:"{{thread.id}}"}},{name:"object.url",title:"GMail URL",ctxValues:{attachment:"{{message.url}}",message:"{{message.url}}",thread:"{{thread.url}}"}},{name:"object.date",title:"Message Date",ctxValues:{attachment:"{{message.date}}",message:"{{message.date}}",thread:"{{thread.lastMessageDate}}"}},{name:"object.subject",title:"Subject",ctxValues:{attachment:"{{message.subject}}",message:"{{message.subject}}",thread:"{{thread.firstMessageSubject}}"}},{name:"object.from",title:"From",ctxValues:{attachment:"{{message.from}}",message:"{{message.from}}"}},{name:"attachment.name",title:"Attachment Name"},{name:"attachment.contentType",title:"Content Type"},{name:"attachment.size",title:"Attachment Size"},{name:"stored.location",title:"Stored Location",ctxValues:{attachment:"{{attachment.stored.location}}"}},{name:"stored.url",title:"Stored URL",ctxValues:{attachment:"{{attachment.stored.url}}"}},{name:"stored.downloadUrl",title:"Download URL",ctxValues:{attachment:"{{attachment.stored.downloadUrl}}"}}]},{kind:"field",key:"logLevel",value:()=>c.INFO},{kind:"field",key:"logSensitiveRedactionMode",value:()=>u.AUTO},{kind:"field",key:"logSheetTracing",value:()=>!1},{kind:"field",decorators:[(0,a.v)()],key:"maxBatchSize",value:()=>10},{kind:"field",decorators:[(0,a.v)()],key:"maxRuntime",value:()=>280},{kind:"field",decorators:[(0,a.v)()],key:"markProcessedLabel",value:()=>""},{kind:"field",decorators:[(0,a.v)()],key:"markProcessedMethod",value:()=>h.MARK_MESSAGE_READ},{kind:"field",decorators:[(0,a.v)()],key:"sleepTimeThreads",value:()=>100},{kind:"field",decorators:[(0,a.v)()],key:"sleepTimeMessages",value:()=>0},{kind:"field",decorators:[(0,a.v)()],key:"sleepTimeAttachments",value:()=>0},{kind:"field",decorators:[(0,a.v)()],key:"timezone",value:()=>"default"}]}}));function g(e){return void 0===e&&(e={}),(0,o.bj)(m,e,{exposeDefaultValues:!0,exposeUnsetFields:!1})}function A(e){return e=(0,l.I)(e,g(),{},["markProcessedMethod"])}},87694:(e,t,r)=>{r.d(t,{L:()=>i});var s=r(64467);class i{}(0,s.A)(i,"DRIVE_TESTS_BASE_PATH","/GmailProcessor-Tests/e2e"),(0,s.A)(i,"EMAIL_SLEEP_TIME_MS",1e4),(0,s.A)(i,"EMAIL_SUBJECT_PREFIX","[GmailProcessor-Test] "),(0,s.A)(i,"GIT_REPO_BASE_URL","https://raw.githubusercontent.com/ahochsteger/gmail-processor"),(0,s.A)(i,"GIT_REPO_BRANCH","main"),(0,s.A)(i,"GIT_REPO_TEST_FILES_PATH","src/e2e-test/files")},97158:(e,t,r)=>{function s(e,t,r,s){return void 0===r&&(r={}),void 0===s&&(s=[]),s=s.concat([]),Object.keys(e).forEach((i=>{const a=function(e,t){return Array.isArray(e)&&t?e=e.map((e=>t(e))):"object"==typeof e&&t&&(e=t(e)),e}(e[i],r[i]),n=JSON.stringify(a);s.includes(i)||null!==a&&n!==JSON.stringify(t[i])&&"[]"!==n&&"{}"!==n||delete e[i]})),e}r.d(t,{I:()=>s})},90514:(e,t,r)=>{r.d(t,{A:()=>s});const s='function simpleRun() {\n  const config = {\n    description:\n      "Use this to get started with Gmail Processor. It stores an attachment to Google Drive.",\n    settings: {\n      markProcessedMethod: "mark-read",\n    },\n    global: {\n      thread: {\n        match: {\n          query:\n            "has:attachment -in:trash -in:drafts -in:spam after:{{date.now|formatDate(\'yyyy-MM-dd\')}} is:unread subject:\\"[GmailProcessor-Test] simple\\"",\n        },\n      },\n    },\n    threads: [\n      {\n        match: {\n          query: "from:${user.email}",\n        },\n        messages: [\n          {\n            attachments: [\n              {\n                match: {\n                  name: "^invoice\\\\.pdf$",\n                },\n                actions: [\n                  {\n                    name: "attachment.store",\n                    args: {\n                      location:\n                        "/GmailProcessor-Tests/e2e/simple/{{message.date|formatDate(\'yyyy-MM-dd\')}}/{{message.subject}}-{{attachment.name}}",\n                      conflictStrategy: "keep",\n                    },\n                  },\n                ],\n              },\n            ],\n          },\n        ],\n      },\n    ],\n  }\n\n  return GmailProcessorLib.run(config, "dry-run")\n}\n'}}]);